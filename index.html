<title></title>


<link rel="stylesheet" type="text/css"
href="style.css">

<canvas></canvas>
 <script>


const canvas = document.querySelector("canvas")

const ctx = canvas.getContext('2d') 
canvas.width = 448
canvas.height = 400

/*variables de nuestro juego*/
let counter = 0

/*Variables de la pelota*/
let bollRadius = 4;
/*posicion de la pelota*/
let x = canvas.width / 2

let y = canvas.height -30
/*velocidad de la pelota*/
let dx = 3

let dy = -3



const paddleHeight = 10;
const paddleWidth = 50;

let paddleX = (canvas.width - paddleWidth )/ 2
let paddleY = canvas.height - paddleHeight - 10

let rightPressed = false
let leftPressed = false


let PADDLE_SENSIBILITY = 7

function drawBall() {
ctx.beginPath()
ctx.arc(x, y, bollRadius, 0, Math.PI *2)
ctx.fillStyle = '#fff'
ctx.fill()
/*ctx.closePhath()*/
}
function drawPaddle(){
ctx.fillStyle = '#09f'
ctx.fillRect(
    paddleX, // La cordenada X
    paddleY, // La cordenada Y
    paddleWidth,// El ancho del dibujo
    paddleHeight //El alto del dibujo
)
}
function drawBricks() {

}

function collisionDectection() {

}

function ballMovement() {
    if (x + dx > canvas.width - bollRadius || //La pared derecha
    x + dx < bollRadius //la pared isquierdad
    ) {
        dx = -dx
    }

    //colision de la parte de arriba

    if (y + dy < bollRadius) {
        dy = -dy
    }

    const isBallSameXAsPaddle = 
    x > paddleX &&
    x < paddleX + paddleWidth

    const isBallTouchingpaddle = 
    y + dy > paddleY



    if (isBallSameXAsPaddle && isBallTouchingpaddle) {
        dy = -dy
    }
    if (y + dy > canvas.height - bollRadius) {
        alert("Perdiste")
        document.location.reload()
    }

    x += dx
    y += dy


}
function paddleMovement() {
if (rightPressed && paddleX < canvas.width - paddleWidth) {
    paddleX += PADDLE_SENSIBILITY
} else if(leftPressed && paddleX > 0) {
    paddleX -= PADDLE_SENSIBILITY
}
}

function cleanCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height)
}


function initEvenst() {
    document.addEventListener('keydown', keyDownHandler)
    document.addEventListener('keyup', keyUpHandler)

    function keyDownHandler(event){
        const {key} = event
        if (key === 'Right' || key === 'ArrowRight') {
            rightPressed = true
        } else if(key === 'Left' || key === 'ArrowLeft') {
            leftPressed = true
        }
    }

    function keyUpHandler(event){
        const {key} = event
        if (key === 'Right' || key === 'ArrowRight') {
            rightPressed = false
        } else if(key === 'Left' || key === 'ArrowLeft') {
            leftPressed = false
        }
    }

}


function draw() {
    cleanCanvas()
    /*hay que dibujar elementos*/
drawBall()
drawPaddle()
drawBricks()

/*collision y movimientos*/

collisionDectection()
ballMovement()
paddleMovement()
window.requestAnimationFrame(draw)
}
draw()
initEvenst()
 </script>